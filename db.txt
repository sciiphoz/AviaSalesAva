-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public."Material"
(
    "ID_Material" serial NOT NULL,
    "Title" character varying(50),
    "ID_Material_Type" integer,
    "Price" numeric(7, 2),
    "Quantity" numeric(7, 2),
    "MinQuantity" numeric(7, 2),
    "Package_Amount" integer,
    "ID_Measure" integer,
    PRIMARY KEY ("ID_Material", "ID_Material_Type"),
    UNIQUE ("ID_Material")
);

CREATE TABLE IF NOT EXISTS public."Supplier"
(
    "ID_Supplier" serial NOT NULL,
    "Name" character varying(50),
    "ID_Supplier_Type" integer,
    "INN" character varying(10),
    "Rating" integer,
    "Start_Date" date,
    PRIMARY KEY ("ID_Supplier")
);

CREATE TABLE IF NOT EXISTS public."Measure"
(
    "ID_Measure" serial NOT NULL,
    "Title" character varying(10),
    PRIMARY KEY ("ID_Measure")
);

CREATE TABLE IF NOT EXISTS public."Material_Type"
(
    "ID_Material_Type" serial NOT NULL,
    "Title" character varying(20),
    "Percentage_Loss" numeric(7, 2),
    PRIMARY KEY ("ID_Material_Type")
);

CREATE TABLE IF NOT EXISTS public."Supplier_Type"
(
    "ID_Supplier_Type" serial NOT NULL,
    "Title" character varying(10),
    PRIMARY KEY ("ID_Supplier_Type")
);

CREATE TABLE IF NOT EXISTS public."Product_Type"
(
    "ID_Product_Type" serial NOT NULL,
    "Title" character varying(50),
    "Coefficient" numeric(7, 2),
    PRIMARY KEY ("ID_Product_Type")
);

CREATE TABLE IF NOT EXISTS public."Material_Supplier"
(
    "ID_Material_Supplier" serial NOT NULL,
    "ID_Material" integer,
    "ID_Supplier" integer,
    PRIMARY KEY ("ID_Material_Supplier")
);

ALTER TABLE IF EXISTS public."Material"
    ADD FOREIGN KEY ("ID_Material_Type")
    REFERENCES public."Material_Type" ("ID_Material_Type") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Material"
    ADD FOREIGN KEY ("ID_Measure")
    REFERENCES public."Measure" ("ID_Measure") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Supplier"
    ADD FOREIGN KEY ("ID_Supplier_Type")
    REFERENCES public."Supplier_Type" ("ID_Supplier_Type") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Material_Supplier"
    ADD FOREIGN KEY ("ID_Material")
    REFERENCES public."Material" ("ID_Material") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Material_Supplier"
    ADD FOREIGN KEY ("ID_Supplier")
    REFERENCES public."Supplier" ("ID_Supplier") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

END;